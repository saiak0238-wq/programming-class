#include <stdio.h>      //PRINTF, scanf를 사용하기 위해서 헤더 추가
#include <stdlib.h>    // rand, srand를 사용하기 위해서 헤더 추가
#include <time.h>   // time 함수를 사용하기 위해서 헤더 추가

int main(void)      //프로그램을 실행하는 main 함수
{                   //메인함수의 시작
    int ball[3]; // 3개의 난수 저장 배열
    srand(time(NULL)); // 난수 초기화

    // 중복 없는 3자리 난수 생성
    do {
        ball[0] = rand() % 10;   // 0~9 사이의 난수 생성
        ball[1] = rand() % 10;   // 0~9 사이의 난수 생성
        ball[2] = rand() % 10;   // 0~9 사이의 난수 생성
    } while (ball[0] == ball[1] || ball[0] == ball[2] || ball[1] == ball[2]); 
      // 세 숫자가 서로 중복될 경우 다시 난수 생성

    //printf("baseball : %d %d %d\n", ball[0], ball[1], ball[2]); // 정답 확인용(테스트시만)

    int input[3];              // 사용자 입력 숫자 3개 저장 배열
    int strike_count = 0 ;     // 스트라이크 횟수 저장 변수
    int ball_count = 0 ;       // 볼 횟수 저장 변수
    int out_count = 0;         // 아웃 횟수 저장 변수
    int try_count = 0;         // 시도 횟수 저장 변수

    clock_t start, end;        // 게임 시작/종료 시간 측정용 변수
    start = clock();           // 게임 시작 시간 기록

    while (1) {                // 정답이 나올 때까지 무한 반복
        printf("\n숫자 3개를 입력하세요 (공백으로 구분): "); // 사용자 입력 유도 메시지
        scanf("%d %d %d", &input[0], &input[1], &input[2]); // 사용자 입력 저장

        strike_count = 0;      // 매 턴마다 스트라이크 수 초기화
        ball_count = 0;        // 매 턴마다 볼 수 초기화

        // strike, ball 판정
        for (int i = 0; i < 3; i++) {          // 입력값 3개 각각 검사
            if (input[i] == ball[i]) {         // 위치와 숫자가 같으면 스트라이크
                strike_count++;
            } else if (input[i] == ball[(i+1)%3] || input[i] == ball[(i+2)%3]) {
                ball_count++;                  // 위치는 다르지만 같은 숫자면 볼
            }
        }

        out_count = 3 - (strike_count + ball_count); // 남은 값은 아웃 처리
        
        try_count++;                   // 시도 횟수 증가

        if (strike_count == 3) {       // 정답(3 스트라이크)일 경우
            end = clock();             // 종료 시간 기록
            double elapsed_sec = (double)(end - start) / CLOCKS_PER_SEC; 
                                        // 경과 시간(초 단위로 변환)

            printf("Home Run! %d번 만에 맞췄습니다!\n", try_count); // 결과 출력
            printf("%f 초 시간이 걸렸습니다.\n", elapsed_sec);       // 걸린 시간 출력
            break;                      // while문 종료 → 게임 종료
        } else {
            printf("%d Strike, %d Ball, %d Out\n", strike_count, ball_count, out_count); // 판정 결과 출력
        }
    }
    return 0; // 프로그램 정상 종료
}