#include <stdio.h>      // printf, scanf 함수를 사용하기 위한 표준 입출력 헤더 파일
#include <stdlib.h>     // rand, srand 등을 사용하기 위한 표준 라이브러리 헤더 파일
#include <time.h>       // time, clock 함수를 사용하기 위한 시간 관련 헤더 파일

int main(void)          // 프로그램의 시작점인 main 함수 정의
{                       // main 함수의 시작
    int ball[3];        // 컴퓨터가 생성하는 3개의 난수를 저장할 배열

    srand(time(NULL));  // 난수 생성기를 현재 시간으로 초기화하여 매 실행마다 다른 난수 발생

    // 중복 없는 3자리 난수 생성
    do {
        ball[0] = rand() % 10;     // 0~9 사이 난수를 생성하여 첫 번째 칸에 저장
        ball[1] = rand() % 10;     // 두 번째 난수 저장
        ball[2] = rand() % 10;     // 세 번째 난수 저장
    } while (ball[0] == ball[1] ||  // 첫 번째와 두 번째가 같은 경우 반복
             ball[0] == ball[2] ||  // 첫 번째와 세 번째가 같은 경우 반복
             ball[1] == ball[2]);   // 두 번째와 세 번째가 같은 경우 반복

    //printf("baseball : %d %d %d\n", ball[0], ball[1], ball[2]); 
    // 정답을 확인하기 위한 테스트용 출력(실행 시 주석 처리)

    int input[3];          // 사용자가 입력하는 3개의 숫자를 저장할 배열
    int strike_count = 0;  // strike(자리+숫자 일치) 개수를 저장하는 변수
    int ball_count = 0;    // ball(숫자는 맞지만 위치가 다름) 개수를 저장하는 변수
    int out_count = 0;     // out(숫자도 위치도 둘 다 틀림) 개수를 저장하는 변수
    int try_count = 0;     // 총 시도 횟수를 저장하는 변수

    clock_t start, end;    // 게임 시작 시간과 종료 시간을 기록하기 위한 변수
    start = clock();       // 게임 시작 시 시간을 기록

    while (1) {            // 정답을 맞출 때까지 무한 반복
        printf("\n숫자 3개를 입력하세요 (공백으로 구분): ");  // 사용자에게 입력 안내
        scanf("%d %d %d", &input[0], &input[1], &input[2]);   // 세 개의 정수를 입력받아 배열에 저장

        strike_count = 0;  // 새로운 입력 시 strike 개수 초기화
        ball_count = 0;    // ball 개수 초기화

        // strike, ball 판정
        for (int i = 0; i < 3; i++) {                  // 각 자리(0,1,2)를 순차적으로 검사
            if (input[i] == ball[i]) {                // 숫자 + 위치까지 정확히 일치하면
                strike_count++;                       // strike 개수 증가
            } else if (input[i] == ball[(i+1)%3] ||   // 자리는 다르고 숫자만 일치하는 경우
                       input[i] == ball[(i+2)%3]) {
                ball_count++;                         // ball 개수 증가
            }
        }

        out_count = 3 - (strike_count + ball_count);   // strike, ball 제외한 나머지는 out

        try_count++;                                   // 시도 횟수 증가

        if (strike_count == 3) {                       // strike가 3이면 정답을 맞춘 상태
            end = clock();                             // 게임 종료 시간 기록
            double elapsed_sec = (double)(end - start) / CLOCKS_PER_SEC; 
                // 걸린 시간을 초 단위로 계산

            printf("Home Run! %d번 만에 맞췄습니다!\n", try_count);  // 성공 메시지 출력
            printf("%f 초 시간이 걸렸습니다.\n", elapsed_sec);        // 걸린 시간 출력
            break;                                       // 반복문 종료 → 게임 끝
        } else {                                         // 정답이 아닌 경우
            printf("%d Strike, %d Ball, %d Out\n",
                    strike_count, ball_count, out_count); // 현재 결과 출력
        }
    }

    return 0;  // 프로그램 정상 종료
}             // main 함수 끝
